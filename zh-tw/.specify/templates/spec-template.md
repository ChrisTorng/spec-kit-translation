# 功能規格說明: [FEATURE NAME]

**功能分支**: `[###-feature-name]`  
**建立時間**: [DATE]
**狀態**: 草稿  
**輸入**: 使用者描述: "$ARGUMENTS"

## 執行流程 (main)
```
1. 從 輸入 解析使用者描述
   → 若為空：ERROR "No feature description provided"
2. 從描述中擷取主要概念
   → 識別：actors、actions、data、constraints
3. 對每個不清楚的面向：
   → 標記為 [NEEDS CLARIFICATION: 具體問題]
4. 補齊「使用者情境與測試」區段
   → 若沒有明確的使用者流程：ERROR "Cannot determine user scenarios"
5. 產生功能性需求
   → 每項需求必須可被測試
   → 標記含糊不清的需求
6. 辨識關鍵實體（若涉資料）
7. 執行審查清單
   → 若仍存在 [NEEDS CLARIFICATION]：WARN "Spec has uncertainties"
   → 若發現實作細節：ERROR "Remove tech details"
8. 回傳：SUCCESS（規格準備好進入規劃）
```

---

## ⚡ 快速指引
- ✅ 專注於使用者的需求（WHAT）及其原因（WHY）
- ❌ 避免描述如何實作（不要提及技術堆疊、API、程式碼結構）
- 👥 針對業務利害關係人撰寫，而非開發者

### 區段要求
- **必填區段**：每個功能皆須完成
- **選填區段**：僅在與功能相關時包含
- 若某區段不適用，請完全移除（不要保留為 "N/A"）

### 供 AI 生成時
當從使用者提示建立此規格時：
1. **標記所有不確定事項**：對任何需要假設的情況，使用 [NEEDS CLARIFICATION: 具體問題]
2. **不要猜測**：若提示未指定某項（例如提到「login system」但未說明驗證方式），請標記
3. **像測試人員一樣思考**：每項模糊的需求都應該會在「可測試且明確」的檢查項目中未通過
4. **常見規格不足的領域**：
   - 使用者類型與權限
   - 資料保留/刪除政策  
   - 效能目標與規模
   - 錯誤處理行為
   - 整合需求
   - 安全/合規需求

---

## 使用者情境與測試 *(必填)*

### 主要使用者故事
[以簡單語言描述主要使用者旅程]

### 驗收情境
1. **Given** [initial state], **When** [action], **Then** [expected outcome]
2. **Given** [initial state], **When** [action], **Then** [expected outcome]

### 邊緣情況
- 當 [boundary condition] 發生時，會如何處理？
- 系統如何處理 [error scenario]？

## 需求 *(必填)*

### 功能性需求
- **FR-001**: 系統必須 [具體能力，例如「允許使用者建立帳號」]
- **FR-002**: 系統必須 [具體能力，例如「驗證電子郵件地址」]  
- **FR-003**: 使用者必須能夠 [主要互動，例如「重設他們的密碼」]
- **FR-004**: 系統必須 [資料需求，例如「持久儲存使用者偏好」]
- **FR-005**: 系統必須 [行為，例如「記錄所有安全事件」]

*標記不清需求的範例：*
- **FR-006**: 系統必須透過 [NEEDS CLARIFICATION: 未指定驗證方法 - email/password、SSO、OAuth?] 進行使用者驗證
- **FR-007**: 系統必須保留使用者資料 [NEEDS CLARIFICATION: 未指定保留期間]

### 關鍵實體 *(若功能涉及資料則包含)*
- **[Entity 1]**: [它代表什麼，主要屬性（不含實作）]
- **[Entity 2]**: [它代表什麼，與其他實體的關係]

---

## 審查與驗收檢查清單
*GATE：於 main() 執行期間執行的自動檢查*

### 內容品質
- [ ] 無實作細節（程式語言、框架、API）
- [ ] 聚焦於使用者價值與業務需求
- [ ] 為非技術性利害關係人撰寫
- [ ] 所有必填區段已完成

### 需求完整性
- [ ] 不留任何 [NEEDS CLARIFICATION] 標記
- [ ] 需求可測試且明確  
- [ ] 成功準則可衡量
- [ ] 範疇界定清楚
- [ ] 已識別相依性與假設

---

## 執行狀態
*由 main() 在處理期間更新*

- [ ] 使用者描述已解析
- [ ] 主要概念已擷取
- [ ] 不確定事項已標記
- [ ] 使用者情境已定義
- [ ] 需求已產生
- [ ] 實體已識別
- [ ] 審查清單已通過

---